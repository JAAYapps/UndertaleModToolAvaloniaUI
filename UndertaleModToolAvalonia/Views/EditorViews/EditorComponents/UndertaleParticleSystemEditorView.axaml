<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:UndertaleModToolAvalonia.ViewModels.EditorViewModels.EditorComponents"
			 xmlns:controls="using:UndertaleModToolAvalonia.Controls"
			 xmlns:undertale="using:UndertaleModLib.Models"
			 xmlns:utils="using:UndertaleModToolAvalonia.Utilities"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="UndertaleModToolAvalonia.Views.EditorViews.EditorComponents.UndertaleParticleSystemEditorView"
			 x:DataType="vm:UndertaleParticleSystemEditorViewModel">
	<ScrollViewer VerticalScrollBarVisibility="Visible">
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1*"/>
				<ColumnDefinition Width="3*"/>
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<TextBlock Grid.Row="0" Grid.Column="0" Margin="3">Name</TextBlock>
			<controls:UndertaleStringReference Grid.Row="0" Grid.Column="1" Margin="3" ObjectReference="{Binding UndertaleParticleSystem.Name}"/>

			<TextBlock Grid.Row="1" Grid.Column="0" Margin="3">Origin</TextBlock>
			<Grid Grid.Row="1" Grid.Column="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<TextBox Grid.Column="0" Margin="3" Text="{Binding UndertaleParticleSystem.OriginX}"/>
				<TextBox Grid.Column="1" Margin="3" Text="{Binding UndertaleParticleSystem.OriginY}"/>
			</Grid>

			<TextBlock Grid.Row="2" Grid.Column="0" Margin="3">Draw order</TextBlock>
			<TextBox Grid.Row="2" Grid.Column="1" Margin="3" Text="{Binding UndertaleParticleSystem.DrawOrder}"/>

			<TextBlock Grid.Row="3" Grid.Column="0" Margin="3">Emitters</TextBlock>
			<Expander Grid.Row="3" Grid.Column="1" Margin="3" Header="List" Name="EmitterListExpander" IsExpanded="True">
				<Grid RowDefinitions="auto,auto">
					<DataGrid Grid.Row="0" ItemsSource="{Binding UndertaleParticleSystem.Emitters}" x:Name="EmitterListGrid"
										AutoGenerateColumns="False" HorizontalGridLinesBrush="LightGray" VerticalGridLinesBrush="LightGray" HeadersVisibility="None" SelectionMode="Single"
										ScrollViewer.AllowAutoHide="False" ScrollViewer.VerticalScrollBarVisibility="Visible">
						<DataGrid.Styles>
							<Style Selector="DataGridCell:selected /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="#FF26A0DA"/>
							</Style>
						</DataGrid.Styles>
						<DataGrid.Columns>
							<DataGridTemplateColumn Width="*">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<controls:UndertaleObjectReference Margin="20,0,0,0" ObjectReference="{Binding Resource, Mode=TwoWay}" ObjectType="{x:Type undertale:UndertaleParticleSystemEmitter}"/>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</DataGrid>
					<Button Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" Margin="5" DoubleTapped="Button_DoubleTapped">
						<TextBlock Margin="5" TextAlignment="Center" FontStyle="Italic">Double click to add</TextBlock>
					</Button>
				</Grid>
			</Expander>
		</Grid>
	</ScrollViewer>
</UserControl>
